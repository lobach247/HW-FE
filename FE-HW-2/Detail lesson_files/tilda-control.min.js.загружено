var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
$(document).ready(function(){$("body").on("click",".tlk__user-image",function(){var a=$(this).parents(".tlk__userbar").find(".tlk__popup");a.hasClass("tlk__popup-show")?a.removeClass("tlk__popup-show"):a.addClass("tlk__popup-show")});if(1==$(".tlk__popup-groups").length&&3>=$(".tlk__popup-groups-pages-item").length)$(".tlk__popup-groups-pages").css("display","block"),$(".tlk__popup-groups-title").css("cursor","inherit");else $(".tlk__popup-groups-title").on("click",function(){$(this).next().slideToggle("slow")});
$("body").on("click",".tlk__popup-action-change-profile",function(a){a.preventDefault();a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",tilda_ma.main_url+"/js/jquery-ui.min.js");document.getElementsByTagName("head")[0].appendChild(a);a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",tilda_ma.main_url+"/js/jquery.formstyler.min.js");document.getElementsByTagName("head")[0].appendChild(a);window.tupready=
!1;a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",tilda_ma.main_url+"/js/tildaupload-3.4.js");a.onload=function(){window.tupready=!0};document.getElementsByTagName("head")[0].appendChild(a);tilda_ma.request(tilda_ma.main_url+"get/profile/full/",[],function(a){"display"==a.action&&($("body").append(a.display),tilda_ma.showProfileSettings(),window.tupinterval=setInterval(function(){window.tupready&&(clearInterval(window.tupinterval),TUWidget.init($("#user-logo-upload")).done(function(a){if(a&&
a.tuInfo&&a.tuInfo.cdnUrl){var b=a.tuInfo.cdnUrl;$(".tlk__popup-user-logo").html('<span class="tlk__popup-user-logo-container"><span class="tlk__popup-user-logo-remove"></span><img src="'+b+'" alt=""></span>');$("body").find('input[name="memberlogo"]').val(a.tuInfo.uuid);$(".tlk__popup-user-logo-error").hide().html("")}else $("#user_logo").val("")}).fail(function(a,b){"string"==typeof b?$(".tlk__popup-user-logo-error").show().html(b):(a=dictionaryJSON[b.result[0].error],$(".tlk__popup-user-logo-error").show(),
$(".tlk__popup-user-logo-error").text(a));$(".tlk__popup-user-logo-container").remove();$("#user_logo").val("")}))},5))})});$("body").on("click",".tlk__popup-action-set-name",function(a){a.preventDefault();tilda_ma.request(tilda_ma.main_url+"get/profile/name/",[],function(a){"display"==a.action&&($("body").append(a.display),tilda_ma.showSetNamePopup())})});$("body").on("click",".tlk__popup-profile-change-password",function(a){a.preventDefault();tilda_ma.request(tilda_ma.main_url+"get/profile/password/",
[],function(a){"display"==a.action&&($("body").append(a.display),tilda_ma.showSetNamePopup())})});$("body").on("submit","#form_change_password",function(a){a.preventDefault();$(".tlk__popup-form-error-password").hide();$submit=$(this).find("input[type=submit]");a=$(this).serializeArray();tilda_ma.request(tilda_ma.main_url+"set/profile/password/",a,function(a){"ok"==a.status?($("#form_change_password input[type!=hidden]").each(function(){$(this).closest("div").hide();$(".tlk__popup-password-form-btn-cancel").hide()}),
$(".tlk__popup-form-error-password").text(a.error),$(".tlk__popup-form-error-password").addClass("tlk__popup-form-error-password-success"),$(".tlk__popup-form-error-password").show(),setTimeout(function(){tilda_ma.closePasswordPopup()},1E3)):($(".tlk__popup-form-error-password").text(a.error),$(".tlk__popup-form-error-password").show())},$submit)});$("body").on("submit","#form_change_profile",function(a){a.preventDefault();$(".tlk__popup-form-error-password").hide();$submit=$(this).find("input[type=submit]");
a=$(this).serializeArray();$(".tlk__popup-user-loader-wrap").show();$(".tlk__popup-profile-form-btn-submit").addClass("tlk__popup-profile-form-btn-submit_disabled");tilda_ma.request(tilda_ma.main_url+"set/profile/full/",a,function(a){"ok"==a.status?($(".tlk__popup-user-loader-wrap").hide(),$(".tlk__popup-profile-form-btn-submit").removeClass("tlk__popup-profile-form-btn-submit_disabled"),0<$(".tlk__popup-form-error-profile-success").length&&tilda_ma.closeProfilePopup(),tilda_ma.old_profile_data!=
a.profile.name+" "+a.profile.login?($(".tlk__popup-form-error-profile").text(a.error),$(".tlk__popup-form-error-profile").addClass("tlk__popup-form-error-profile-success"),$(".tlk__popup-form-error-profile").show(),setTimeout(function(){tilda_ma.closeProfilePopup()},2500)):tilda_ma.closeProfilePopup(),localStorage.setItem("memberarea_profile",JSON.stringify(a.profile)),tilda_ma.loadProfile(),tilda_ma.changeProfileDataInPopup(a.profile.name,a.profile.login),tilda_ma.addUserLogo(a.profile.memberlogo),
$(".tlk__comments-userpic")&&tilda_ma.changeCommentUserpic(a.profile.memberlogo)):($(".tlk__popup-form-error-profile").text(a.error.substring(4)),$(".tlk__popup-form-error-profile").show());$(".tlk__popup-user-loader-wrap").hide();$(".tlk__popup-profile-form-btn-submit").removeClass("tlk__popup-profile-form-btn-submit_disabled")},$submit)});$("body").on("click",".tlk__popup-setname-form-btn-cancel",function(){sessionStorage.setItem("setnamequery",!1);tilda_ma.closeProfilePopup()});$("body").on("submit",
"#form_set_name",function(a){a.preventDefault();$(".tlk__popup-form-error-password").hide();$submit=$(this).find("input[type=submit]");a=$(this).serializeArray();0<$(".tlk__popup-form-error-profile-success").length&&tilda_ma.closeProfilePopup();tilda_ma.request(tilda_ma.main_url+"set/profile/name/",a,function(a){"ok"==a.status?($(".tlk__popup-form-error-profile").text(a.error),$(".tlk__popup-form-error-profile").addClass("tlk__popup-form-error-profile-success"),$(".tlk__popup-form-error-profile").show(),
localStorage.setItem("memberarea_profile",JSON.stringify(a.profile)),tilda_ma.loadProfile(),tilda_ma.changeProfileDataInPopup(a.profile.name,a.profile.login)):($(".tlk__popup-form-error-profile").text(a.error.substring(4)),$(".tlk__popup-form-error-profile").show())},$submit)});$("body").on("click",".tlk__popup-user-logo-remove",function(){$(this).parents(".tlk__popup-user-logo-container").remove();$("#user_logo").val("")});document.onmouseup=function(a){$("body").hasClass("td-body_popup-opened")||
tilda_ma.closePopupOutside(a)};"undefined"!=typeof tilda_ma.profile&&tilda_ma.profile.istutor&&(tilda_ma.flashTaskCheck(),setInterval(function(){tilda_ma.flashTaskCheck()},tilda_ma.flashtask.checkinterval))});tilda_ma.counter=0;tilda_ma.flashTaskCheck=function(){};tilda_ma.checkDownloadProfile=function(){tilda_ma.counter++;if(!(10<=tilda_ma.counter)){var a=!1,b;for(b in tilda_ma.profile)a=!0;a?tilda_ma.addInputWithUserData():setTimeout(tilda_ma.checkDownloadProfile,300)}};
tilda_ma.addInputWithUserData=function(){$(document).ready(function(){$(".js-form-proccess").each(function(){$(this).prepend('<input type="hidden" name="ma_name" value="'+tilda_ma.profile.name+'">');$(this).prepend('<input type="hidden" name="ma_email" value="'+tilda_ma.profile.login+'">')});$(window).resize(function(){setTimeout(function(){tilda_ma.addHiddenInputsInZero()},3E3)});setTimeout(function(){tilda_ma.addHiddenInputsInZero()},3E3)})};
tilda_ma.addHiddenInputsInZero=function(){$(".tn-atom__form .js-form-proccess").each(function(){0<$(this).children('input[name="ma_email"]').length||($(this).prepend('<input type="hidden" name="ma_name" value="'+tilda_ma.profile.name+'">'),$(this).prepend('<input type="hidden" name="ma_email" value="'+tilda_ma.profile.login+'">'))})};
tilda_ma.closePopupOutside=function(a){var b=document.querySelector(".tlk__popup");null===a.target.closest(".tlk__userbar")&&b.classList.contains("tlk__popup-show")&&b.classList.remove("tlk__popup-show")};tilda_ma.closePasswordPopup=function(){$(".tlk__popup-password").remove();$(".tlk__popup-profile-container").css("visibility","visible")};tilda_ma.closeProfilePopup=function(){$(".tlk__popup-profile").remove();$("body").removeClass("td-body_popup-opened")};
tilda_ma.closeOutside=function(){$("body").hasClass("td-body_popup-opened")||$(document).keyup(tilda_ma.keyUpFunc);$("body").on("click",$(".tlk__popup-profile-container"),function(a){$(a.target).hasClass("tlk__popup-profile-container")&&(tilda_ma.closePasswordPopup(),tilda_ma.closeProfilePopup())});$("body").on("click",$(".tlk__popup-password-container"),function(a){$(a.target).hasClass("tlk__popup-password-container")&&(tilda_ma.closePasswordPopup(),tilda_ma.closeProfilePopup())})};
tilda_ma.keyUpFunc=function(a){27==a.keyCode&&(tilda_ma.closePasswordPopup(),tilda_ma.closeProfilePopup())};tilda_ma.closepopup=function(a){$("body").removeClass("td-body_popup-opened");var b=$(".td-popup_opened");$(document).unbind("keyup",tilda_ma.keyUpFunc);void 0!=a?$(a).remove():b.remove()};tilda_ma.showLoader=function(){$(".loadicon").css({display:"block"});$(".tlk__reg-form-submit, .tlk__signup-form-submit").css("color","#333333")};
tilda_ma.hideLoader=function(){$(".loadicon").css({display:"none"});$(".tlk__reg-form-submit, .tlk__signup-form-submit").css("color","#ffffff")};tilda_ma.changeProfileDataInPopup=function(a,b){$(".tlk__popup-name").text(a);$(".tlk__popup-login").text("("+b+")")};
tilda_ma.showProfileSettings=function(){$("body").addClass("td-body_popup-opened");$(".tlk__popup-profile").addClass("td-popup_opened");$(".tlk__popup-profile .tlk__popup-profile-window").removeAttr("style");var a=$("#form_change_profile");a.find('input[name="name"]').val(tilda_ma.profile.name);a.find('input[name="email"]').val(tilda_ma.profile.login);a.find('input[name="memberlogo"]').val(tilda_ma.profile.memberlogo_uuid);""<tilda_ma.profile.memberlogo&&a.find("span.tlk__popup-user-logo").append('<span class="tlk__popup-user-logo-container">\n                                  <span class="tlk__popup-user-logo-remove"></span>\n                                  <img src="'+
tilda_ma.profile.memberlogo+'">\n                              </span>');tilda_ma.old_profile_data=tilda_ma.profile.name+" "+tilda_ma.profile.login;document.querySelector(".tlk__popup").classList.remove("tlk__popup-show");tilda_ma.showPassword()};tilda_ma.showSetNamePopup=function(){$("body").addClass("td-body_popup-opened");$(".tlk__popup-profile").addClass("td-popup_opened");$("#form_set_name").find('input[name="name"]').val(tilda_ma.profile.name);document.querySelector(".tlk__popup").classList.remove("tlk__popup-show")};
tilda_ma.showPassword=function(){$("body").on("click",".tlk__popup-password-visibility-old",function(){var a=$("#reg-form-email-recovery-old");tilda_ma.setPasswordVisibility($(this),a)});$("body").on("click",".tlk__popup-password-visibility-new",function(){var a=$("#reg-form-email-recovery-new");tilda_ma.setPasswordVisibility($(this),a)})};
tilda_ma.setPasswordVisibility=function(a,b){a.toggleClass("tlk__popup-password-visibility_visible");a.hasClass("tlk__popup-password-visibility_visible")?b.attr("type","text"):b.attr("type","password")};tilda_ma.showUserLogo=function(){$(".tlk__user-image").hasClass("tlk__user-image-bg")?$(".tlk__user-image-icon").hide():$(".tlk__user-image-icon").show()};
tilda_ma.addUserLogo=function(a){void 0!=a?($(".tlk__user-image").addClass("tlk__user-image-bg").css("background-image","url("+a+")"),$(".tlk__user-image-icon").hide()):($(".tlk__user-image").removeClass("tlk__user-image-bg"),$(".tlk__user-image").addClass("tlk__user-image-bg").css("background-image","url()"),$(".tlk__user-image-icon").show())};tilda_ma.changeCommentUserpic=function(a){void 0!=a&&$(".tlk__comments-userpic").each(function(){$(this).attr("src",a)})};tilda_ma.showUserLogo();tilda_ma.closeOutside();
tilda_ma.checkDownloadProfile();
